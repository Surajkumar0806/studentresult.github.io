<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VTU Provisional Result</title>
  <style>
    body {
      font-family: "Times New Roman", serif;
      margin: 40px;
      background-color: #fff;
      color: #000;
    }

    .header {
      text-align: center;
      border-bottom: 2px solid #000;
      padding-bottom: 10px;
    }

    .header img {
      width: 90px;
      position: absolute;
      left: 50px;
      top: 40px;
    }

    .header h1 {
      font-size: 20px;
      margin-bottom: 4px;
    }

    .header h2 {
      font-size: 18px;
      margin: 2px 0;
    }

    .header p {
      margin: 0;
      font-size: 14px;
    }

    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-top: 20px;
    }

    .info-table {
      margin-top: 20px;
      width: 100%;
      border: 1px solid #000;
      border-collapse: collapse;
    }

    .info-table td {
      border: 1px solid #000;
      padding: 6px 10px;
    }

    .info-photo {
      margin-left: 20px;
    }

    .student-photo {
      width: 120px;
      height: 140px;
      border: 1px solid #000;
      object-fit: cover;
      margin-top: -10px;
    }

    table.subjects {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      font-size: 14px;
    }

    .subjects th, .subjects td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
    }

    .subjects th {
      background-color: #f2f2f2;
    }

    .footer {
      margin-top: 20px;
      font-size: 13px;
    }

    .legend {
      margin-top: 10px;
      font-size: 13px;
    }

    .notes {
      font-size: 12px;
      margin-top: 10px;
    }

    .signature {
      margin-top: 30px;
      text-align: right;
      padding-right: 40px;
      font-weight: bold;
    }

    .bottom-bar {
      font-size: 11px;
      border-top: 1px dashed #000;
      margin-top: 30px;
      padding-top: 5px;
      display: flex;
      justify-content: space-between;
    }

    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 14px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 30px;
    }

    .no-print {
      margin-top: 20px;
    }

    @media print {
      .no-print {
        display: none;
      }
    }
  </style>
</head>
<body>

  <div class="header">
    <img src="https://i0.wp.com/sjbit.edu.in/wp-content/uploads/2021/07/VTU-Logo-250x250-1.png?ssl=1" alt="VTU Logo" />
    <p><strong>ವಿಶ್ವೇಶ್ವರಯ್ಯ ತಾಂತ್ರಿಕ ವಿಶ್ವವಿದ್ಯಾಲಯ</strong></p>
    <h1>Visvesvaraya Technological University</h1>
    <p>(State University of Government of Karnataka Established as per the VTU Act, 1994)</p>
    <p>“Jnana Sangama” Belagavi-590018, Karnataka, India</p>
    <h2>VTU PROVISIONAL RESULTS OF UG / PG June / July - 2025 EXAMINATION</h2>
  </div>

  <!-- USN + Name (in bordered table) + Photo Horizontal Row -->
  <div class="info-row">
    <table class="info-table">
      <tr>
        <td><strong>USN</strong></td>
        <td><%= student.rollNo %></td>
      </tr>
      <tr>
        <td><strong>Student Name</strong></td>
        <td><%= student.studentName %></td>
      </tr>
    </table>
    <div class="info-photo">
      <img src="<%= student.photo %>" alt="Student Photo" class="student-photo" />
    </div>
  </div>

  <div style="margin-top: 10px; font-size: 14px;">
    <strong>Semester:</strong> <%= student.semester %>
  </div>

  <div class="student-section">
    <div style="width: 100%;">
      <table class="subjects">
        <thead>
          <tr>
            <th>Subject Code</th>
            <th>Subject Title</th>
            <th>Internal Marks</th>
            <th>External Marks</th>
            <th>Total Marks</th>
            <th>Subject Result</th>
          </tr>
        </thead>
        <tbody>
          <% student.subjects.forEach(sub => { %>
            <tr>
              <td><%= sub.code %></td>
              <td><%= sub.name %></td>
              <td><%= sub.internalMarks %></td>
              <td><%= sub.externalMarks %></td>
              <td><%= sub.internalMarks + sub.externalMarks %></td>
              <td><%= (sub.internalMarks + sub.externalMarks) >= 40 ? 'P' : 'F' %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="legend">
    <strong>Nomenclature / Abbreviations</strong><br />
    P := PASS &nbsp;&nbsp;&nbsp; F := FAIL &nbsp;&nbsp;&nbsp; A := ABSENT &nbsp;&nbsp;&nbsp; WH := WITHHELD &nbsp;&nbsp;&nbsp; X, NE := NOT ELIGIBLE
  </div>

  <div class="notes">
    <strong>Note :</strong><br />
    1) Results of some subjects of some students are not appearing due to reasons such as,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;a) CIE not Available<br />
    &nbsp;&nbsp;&nbsp;&nbsp;b) SEE not available<br />
    because of technical reasons etc, however they will be updated shortly.<br />
    2) Withheld results to be announced later.
  </div>

  <div class="signature">
    Sd/-<br />
    REGISTRAR (EVALUATION)
  </div>

  <div class="bottom-bar">
    <div>Result Sheet ID: VTU<%= student.rollNo %></div>
    <div><%= new Date().toLocaleString("en-IN", { timeZone: "Asia/Kolkata" }) %></div>
    <div>webportal: https://results.vtu.ac.in</div>
  </div>

  <div class="no-print">
    <form action="/download-pdf/<%= student._id %>" method="GET">
      <button type="submit">Download Result</button>
    </form>
  </div>

</body>
</html>
